import { writeFileSync } from 'node:fs';
import { resolve } from 'node:path';

const categories = [
  {
    key: 'أماكن',
    hints: ['فكر في المكان اللي ممكن الناس تقابَل فيه.', 'ركّز في الجو العام للمكان وحركته.'],
    clusters: [
      ['ميدان عام', 'شارع جانبي', 'حارة شعبية', 'موقف ميكروباص', 'محطة مترو', 'كوبري'],
      ['مدرسة حكومي', 'سنتر دروس', 'جامعة', 'مكتبة عامة', 'معمل كمبيوتر', 'فصل دراسي'],
      ['مستشفى عام', 'صيدلية', 'عيادة أسنان', 'معمل تحاليل', 'طوارئ', 'غرفة عمليات'],
      ['سوبر ماركت', 'بقالة', 'سوق خضار', 'فرن عيش', 'محل عصير', 'كشك'],
      ['كافيه', 'مطعم كشري', 'مطعم فول وطعمية', 'عربية كبدة', 'محل حلويات', 'سور النادي'],
    ],
  },
  {
    key: 'أكل',
    hints: ['دي كلمة مرتبطة بالأكل أو الشرب.', 'فكر في الأكل المصري اليومي.'],
    clusters: [
      ['طعمية', 'فول', 'عيش بلدي', 'بيض مسلوق', 'بطاطس محمرة', 'جبنة قديمة'],
      ['كشري', 'ملوخية', 'محشي', 'مسقعة', 'فتة', 'ورق عنب'],
      ['حمام محشي', 'كبدة اسكندراني', 'ممبار', 'فراخ مشوية', 'كفتة', 'شوربة لسان عصفور'],
      ['بسبوسة', 'كنافة', 'أم علي', 'مهلبية', 'رز بلبن', 'زلابية'],
      ['شاي بالنعناع', 'قهوة مظبوط', 'قصب', 'سوبيا', 'تمر هندي', 'ليمون نعناع'],
    ],
  },
  {
    key: 'شغل',
    hints: ['دي مهنة أو دور شغل معروف.', 'فكر في طبيعة الشغل اليومي.'],
    clusters: [
      ['مدرس', 'دكتور', 'صيدلي', 'مهندس', 'محاسب', 'محامي'],
      ['سواق ميكروباص', 'سواق تاكسي', 'كمسري', 'عامل محطة', 'ميكانيكي', 'سمكري'],
      ['نجار', 'سباك', 'كهربائي', 'نقاش', 'حداد', 'عامل سيراميك'],
      ['شيف', 'جرسون', 'كاشير', 'عامل مخبز', 'باريستا', 'طباخ'],
      ['مصور', 'مذيع', 'صحفي', 'مونتير', 'مصمم', 'مطور'],
    ],
  },
  {
    key: 'حاجات',
    hints: ['دي حاجة ملموسة بنستخدمها.', 'فكر في شكلها واستخدامها.'],
    clusters: [
      ['موبايل', 'سماعة', 'شاحن', 'باور بانك', 'جراب', 'شاشة'],
      ['مفتاح', 'محفظة', 'كارت', 'شنطة', 'ساعة يد', 'نضارة'],
      ['مقص', 'مفك', 'مطرقة', 'متر', 'كماشة', 'مسطرة'],
      ['كوباية', 'طبق', 'معلقة', 'سكينة', 'حلة', 'طاسة'],
      ['كرة', 'كوتشي', 'تيشيرت', 'جاكيت', 'طرحة', 'حزام'],
    ],
  },
  {
    key: 'مواصلات',
    hints: ['دي وسيلة نقل أو جزء منها.', 'فكر في الحركة والزحمة والطرق.'],
    clusters: [
      ['ميكروباص', 'أتوبيس', 'تاكسي', 'مترو', 'ترام', 'قطار'],
      ['موتوسيكل', 'عجلة', 'سكوتر', 'عربية ملاكي', 'نصف نقل', 'تريلا'],
      ['مطار', 'طيارة', 'صالة سفر', 'برج مراقبة', 'شنطة سفر', 'تذكرة'],
      ['معدية', 'لنش', 'مركب', 'مارينا', 'ميناء', 'رصيف'],
      ['إشارة', 'ملف مروري', 'دوران', 'كوبري مشاة', 'محطة بنزين', 'ورشة'],
    ],
  },
  {
    key: 'طبيعة',
    hints: ['دي حاجة من الطبيعة حوالينا.', 'فكر في الجو والأرض والمناظر.'],
    clusters: [
      ['نيل', 'ترعة', 'بحر', 'شاطئ', 'موج', 'رملة'],
      ['صحراء', 'جبل', 'هضبة', 'وادي', 'صخرة', 'كهف'],
      ['شمس', 'قمر', 'نجمة', 'سحابة', 'مطر', 'هوا'],
      ['شجرة', 'نخلة', 'زرع', 'ورد', 'عشب', 'طين'],
      ['عصفور', 'حمامة', 'كلب', 'قطة', 'حصان', 'جمل'],
    ],
  },
  {
    key: 'أنشطة',
    hints: ['دي فعل أو نشاط بيتعمل.', 'فكر في اللي الناس بتعمله في اليوم.'],
    clusters: [
      ['جري', 'مشي', 'سباحة', 'عوم', 'تسخين', 'تمرين'],
      ['طبخ', 'تقطيع', 'تسوية', 'تحمير', 'خبز', 'تقديم'],
      ['قراءة', 'كتابة', 'رسم', 'تلوين', 'مذاكرة', 'حل واجب'],
      ['تصوير', 'مونتاج', 'نشر', 'تعليق', 'مشاهدة', 'بث مباشر'],
      ['لعب كورة', 'بلايستيشن', 'شطرنج', 'دومينو', 'طاولة', 'بلياردو'],
    ],
  },
];

const words = [];
let wordIndex = 0;

for (const category of categories) {
  for (let clusterIdx = 0; clusterIdx < category.clusters.length; clusterIdx++) {
    const cluster = category.clusters[clusterIdx];
    // Semantic difficulty: first 2 clusters = easy, next 2 = medium, rest = hard
    const clusterDifficulty = clusterIdx < 2 ? 'easy' : clusterIdx < 4 ? 'medium' : 'hard';
    for (const item of cluster) {
      const related = cluster.filter((word) => word !== item).slice(0, 4);
      const difficulty = clusterDifficulty;

      words.push({
        id: `word_${wordIndex.toString().padStart(5, '0')}`,
        text_en: item,
        text_ar: item,
        category: category.key,
        difficulty,
        hints: category.hints,
        decoys: related,
      });

      wordIndex += 1;
    }
  }
}

const payload = {
  version: 3,
  generatedAt: new Date().toISOString(),
  words,
};

const targetPath = resolve(process.cwd(), 'public', 'data', 'word-pack.json');
writeFileSync(targetPath, JSON.stringify(payload));

console.log(`Generated ${words.length} words at ${targetPath}`);
