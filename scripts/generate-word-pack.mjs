import { writeFileSync } from 'node:fs';
import { resolve } from 'node:path';

// ═══════════ 500+ كلمة مصرية معروفة — كلهم عربي مصري صميم ═══════════
const categories = [
  {
    key: 'أماكن',
    hints: ['فكر في مكان ممكن تزوره.', 'ركّز في نوع المكان ده.'],
    clusters: [
      ['ميدان التحرير', 'شارع جانبي', 'حارة شعبية', 'موقف ميكروباص', 'محطة مترو', 'كوبري'],
      ['مدرسة حكومي', 'سنتر دروس', 'جامعة', 'مكتبة عامة', 'فصل دراسي', 'حضانة'],
      ['مستشفى عام', 'صيدلية', 'عيادة أسنان', 'معمل تحاليل', 'طوارئ', 'غرفة عمليات'],
      ['سوبر ماركت', 'بقالة', 'سوق خضار', 'فرن عيش', 'محل عصير', 'كشك سجاير'],
      ['كافيه', 'مطعم كشري', 'مطعم فول وطعمية', 'عربية كبدة', 'محل حلويات', 'قهوة بلدي'],
      ['ملاهي', 'سينما', 'مسرح', 'نادي رياضي', 'حمام سباحة', 'جيم'],
      ['مسجد', 'كنيسة', 'مقام', 'زاوية', 'ضريح', 'مقبرة'],
      ['بنك', 'مكتب بريد', 'سجل مدني', 'الشهر العقاري', 'مرور', 'قسم شرطة'],
      ['أهرامات', 'خان الخليلي', 'قلعة محمد علي', 'برج القاهرة', 'حديقة الأزهر', 'المتحف المصري'],
      ['شارع الهرم', 'كورنيش النيل', 'شارع فيصل', 'المعادي', 'مدينة نصر', 'عين شمس'],
    ],
  },
  {
    key: 'أكل',
    hints: ['حاجة بتاكلها أو بتشربها.', 'فكر في الأكل المصري اليومي.'],
    clusters: [
      ['طعمية', 'فول مدمس', 'عيش بلدي', 'بيض مسلوق', 'بطاطس محمرة', 'جبنة قديمة'],
      ['كشري', 'ملوخية', 'محشي', 'مسقعة', 'بامية', 'فاصوليا'],
      ['فراخ مشوية', 'كفتة', 'كبدة اسكندراني', 'ممبار', 'حمام محشي', 'شوربة لسان عصفور'],
      ['بسبوسة', 'كنافة', 'أم علي', 'مهلبية', 'رز بلبن', 'زلابية'],
      ['شاي بالنعناع', 'قهوة مظبوط', 'قصب', 'سوبيا', 'تمر هندي', 'ليمون بالنعناع'],
      ['فتة', 'ورق عنب', 'فتة شاورما', 'مكرونة بالبشاميل', 'رقاق', 'كوارع'],
      ['عيش فينو', 'عيش شمس', 'فطير مشلتت', 'جلاش', 'سمبوسك', 'لقمة القاضي'],
      ['مانجة', 'جوافة', 'بطيخ', 'شمام', 'برتقال', 'يوسفي'],
      ['ترمس', 'حمص', 'لب سوري', 'لب أبيض', 'فول سوداني', 'تسالي'],
      ['حواوشي', 'طاجن', 'سجق إسكندراني', 'شيش طاووق', 'كباب', 'طرب'],
    ],
  },
  {
    key: 'شغل',
    hints: ['دي مهنة أو شغلانة.', 'فكر في طبيعة الشغل اليومي.'],
    clusters: [
      ['مدرس', 'دكتور', 'صيدلي', 'مهندس', 'محاسب', 'محامي'],
      ['سواق ميكروباص', 'سواق تاكسي', 'كمسري', 'عامل محطة', 'ميكانيكي', 'سمكري'],
      ['نجار', 'سباك', 'كهربائي', 'نقاش', 'حداد', 'عامل سيراميك'],
      ['شيف', 'جرسون', 'كاشير', 'عامل مخبز', 'باريستا', 'طباخ'],
      ['مصور', 'مذيع', 'صحفي', 'مونتير', 'مصمم جرافيك', 'مطور برمجيات'],
      ['ضابط', 'عسكري', 'أمين شرطة', 'مأمور', 'جندي', 'حارس أمن'],
      ['فلاح', 'بيطري', 'صياد سمك', 'عامل معصرة', 'تاجر خضار', 'جزار'],
      ['ممثل', 'مخرج', 'منتج', 'كاتب سيناريو', 'ملحن', 'مغني شعبي'],
    ],
  },
  {
    key: 'حاجات',
    hints: ['دي حاجة ملموسة بنستخدمها.', 'فكر في شكلها واستخدامها.'],
    clusters: [
      ['موبايل', 'سماعة', 'شاحن', 'باور بانك', 'جراب موبايل', 'شاشة'],
      ['مفتاح', 'محفظة', 'كارت', 'شنطة', 'ساعة يد', 'نضارة شمس'],
      ['مقص', 'مفك', 'مطرقة', 'متر قياس', 'كماشة', 'مسطرة'],
      ['كوباية', 'طبق', 'معلقة', 'سكينة', 'حلة', 'طاسة'],
      ['كرة', 'كوتشي', 'تيشيرت', 'جاكيت', 'طرحة', 'حزام'],
      ['ريموت كنترول', 'تليفزيون', 'تكييف', 'مروحة', 'سخان', 'ميكروويف'],
      ['وسادة', 'بطانية', 'ملاية', 'مرتبة', 'سجادة', 'ستارة'],
      ['قلم رصاص', 'كراسة', 'أستيكة', 'براية', 'شنطة مدرسة', 'مقلمة'],
      ['بنطلون', 'قميص', 'فستان', 'شبشب', 'كاب', 'إيشارب'],
    ],
  },
  {
    key: 'مواصلات',
    hints: ['دي وسيلة نقل أو حاجة مرتبطة بالطريق.', 'فكر في الحركة والزحمة.'],
    clusters: [
      ['ميكروباص', 'أتوبيس', 'تاكسي أبيض', 'مترو', 'توك توك', 'قطار'],
      ['موتوسيكل', 'عجلة', 'سكوتر', 'عربية ملاكي', 'نصف نقل', 'تريلا'],
      ['مطار', 'طيارة', 'صالة سفر', 'جواز سفر', 'شنطة سفر', 'تذكرة طيران'],
      ['معدية', 'لنش', 'مركب صيد', 'فلوكة', 'ميناء', 'رصيف'],
      ['إشارة مرور', 'مطب صناعي', 'دوران', 'كوبري مشاة', 'محطة بنزين', 'ورشة عربيات'],
      ['أوبر', 'كريم', 'كارتة مترو', 'موقف أتوبيس', 'خط سير', 'زحمة'],
    ],
  },
  {
    key: 'طبيعة',
    hints: ['دي حاجة من الطبيعة.', 'فكر في الجو والأرض والمناظر.'],
    clusters: [
      ['نهر النيل', 'ترعة', 'بحر أبيض', 'شاطئ', 'موج', 'رملة'],
      ['صحراء', 'جبل سيناء', 'هضبة', 'وادي', 'صخرة', 'كهف'],
      ['شمس', 'قمر', 'نجمة', 'سحابة', 'مطر', 'هوا ساخن'],
      ['نخلة', 'شجرة توت', 'زرع', 'وردة', 'عشب', 'طين'],
      ['عصفور', 'حمامة', 'كلب بلدي', 'قطة', 'حصان', 'جمل'],
      ['تمساح', 'سلحفاة', 'ضفدع', 'سحلية', 'غراب', 'أرنب بري'],
    ],
  },
  {
    key: 'أنشطة',
    hints: ['دي فعل أو نشاط الناس بتعمله.', 'فكر في حاجة بتحصل كل يوم.'],
    clusters: [
      ['جري', 'مشي', 'سباحة', 'تسخين', 'تمرين ضغط', 'رياضة'],
      ['طبخ', 'تقطيع', 'تحمير', 'خبز عيش', 'غسيل أطباق', 'تقديم أكل'],
      ['قراءة', 'كتابة', 'رسم', 'تلوين', 'مذاكرة', 'حل واجب'],
      ['تصوير', 'مونتاج', 'نشر بوست', 'تعليق', 'مشاهدة مسلسل', 'بث مباشر'],
      ['لعب كورة', 'بلايستيشن', 'شطرنج', 'دومينو', 'طاولة زهر', 'بلياردو'],
      ['ري الزرع', 'كنس', 'مسح', 'غسيل هدوم', 'كوي', 'ترتيب'],
      ['سهرة', 'قعدة على قهوة', 'نرد', 'ورق كوتشينة', 'كلام فاضي', 'مزيكا شعبي'],
    ],
  },
  {
    key: 'رياضة',
    hints: ['دي رياضة أو حاجة رياضية.', 'فكر في الملاعب والمباريات.'],
    clusters: [
      ['كورة قدم', 'كورة يد', 'كورة سلة', 'كورة طائرة', 'تنس', 'إسكواش'],
      ['ملعب', 'مدرج', 'مدرب', 'حكم', 'ضربة جزاء', 'أوفسايد'],
      ['أهلي', 'زمالك', 'إسماعيلي', 'مصري', 'اتحاد', 'استاد القاهرة'],
      ['كارتيه', 'تايكوندو', 'ملاكمة', 'مصارعة', 'جودو', 'كونغ فو'],
      ['سباق عدو', 'وثب طويل', 'رمي قرص', 'سباحة حرة', 'غوص', 'تزلج مائي'],
    ],
  },
  {
    key: 'بيت',
    hints: ['دي حاجة في البيت.', 'فكر في الأوض والأثاث.'],
    clusters: [
      ['صالون', 'أنتريه', 'سفرة', 'أوضة نوم', 'مطبخ', 'حمام'],
      ['ثلاجة', 'بوتاجاز', 'غسالة', 'خلاط', 'محضر طعام', 'توستر'],
      ['كنبة', 'ترابيزة', 'كرسي', 'دولاب', 'سرير', 'تسريحة'],
      ['مكنسة', 'جردل', 'ممسحة', 'فوطة', 'صابونة', 'ليفة'],
      ['لمبة', 'أباجورة', 'نجفة', 'نيون', 'كشاف', 'فيشة كهرباء'],
      ['طحينة', 'كاتشب', 'خل', 'ملح', 'فلفل', 'زيت ذرة'],
      ['باب', 'شباك', 'بلكونة', 'سلم', 'أسانسير', 'سطح'],
    ],
  },
  {
    key: 'مناسبات',
    hints: ['دي مناسبة أو احتفال.', 'فكر في الأعياد والفرح.'],
    clusters: [
      ['فرح', 'خطوبة', 'عقد قران', 'زفة', 'حنة', 'كوشة'],
      ['عيد الفطر', 'عيد الأضحى', 'رمضان', 'فانوس', 'مدفع الإفطار', 'سحور'],
      ['عيد ميلاد', 'تورتة', 'شموع', 'هدية', 'بالونات', 'حفلة'],
      ['جنازة', 'عزاء', 'فاتحة', 'سرادق', 'تكفين', 'دفن'],
      ['سبوع', 'حلاوة مولد', 'عروسة مولد', 'حصان مولد', 'موكب', 'احتفال'],
      ['نجاح ثانوية عامة', 'تخرج', 'شهادة تقدير', 'ميدالية', 'كأس', 'حفل تكريم'],
    ],
  },
  {
    key: 'مدرسة',
    hints: ['دي حاجة مرتبطة بالمدرسة أو التعليم.', 'فكر في أيام الدراسة.'],
    clusters: [
      ['سبورة', 'طباشير', 'فصل', 'مقعد', 'كتاب مدرسي', 'حصة'],
      ['امتحان', 'ورقة إجابة', 'درجة', 'نتيجة', 'رسوب', 'نجاح'],
      ['ناظر', 'وكيل', 'مشرف', 'أخصائي', 'مدرس أول', 'معيد'],
      ['طابور صباح', 'فسحة', 'كانتين', 'حوش المدرسة', 'معمل علوم', 'مكتبة المدرسة'],
      ['واجب', 'مشروع', 'بحث', 'عرض تقديمي', 'ورقة عمل', 'جدول حصص'],
    ],
  },
  {
    key: 'تكنولوجيا',
    hints: ['دي حاجة تكنولوجيا بنستخدمها.', 'فكر في الأجهزة والإنترنت.'],
    clusters: [
      ['لاب توب', 'كمبيوتر', 'تابلت', 'فلاشة', 'هارد خارجي', 'ماوس'],
      ['واي فاي', 'راوتر', 'داتا', 'تطبيق', 'تحديث', 'نوتيفيكيشن'],
      ['فيسبوك', 'واتساب', 'إنستجرام', 'تيك توك', 'يوتيوب', 'تويتر'],
      ['باسورد', 'إيميل', 'لينك', 'QR كود', 'سكرين شوت', 'بلوتوث'],
      ['بابجي', 'فري فاير', 'فيفا', 'ماينكرافت', 'كاندي كراش', 'سوليتير'],
    ],
  },
];

const words = [];
let wordIndex = 0;

for (const category of categories) {
  for (let clusterIdx = 0; clusterIdx < category.clusters.length; clusterIdx++) {
    const cluster = category.clusters[clusterIdx];
    // Semantic difficulty: first 2 = easy, next 2 = medium, rest = hard
    const clusterDifficulty = clusterIdx < 2 ? 'easy' : clusterIdx < 4 ? 'medium' : 'hard';
    for (const item of cluster) {
      const related = cluster.filter((word) => word !== item).slice(0, 4);
      const difficulty = clusterDifficulty;

      words.push({
        id: `word_${wordIndex.toString().padStart(5, '0')}`,
        text_en: item,
        text_ar: item,
        category: category.key,
        difficulty,
        hints: category.hints,
        decoys: related,
      });

      wordIndex += 1;
    }
  }
}

const payload = {
  version: 4,
  generatedAt: new Date().toISOString(),
  words,
};

const targetPath = resolve(process.cwd(), 'public', 'data', 'word-pack.json');
writeFileSync(targetPath, JSON.stringify(payload));

console.log(`✅ Generated ${words.length} words across ${categories.length} categories at ${targetPath}`);
